<<<<<<< HEAD
sj_list3 <- igraph_to_networkD3(g3, group = members3)
sj_list3
g3
a
a<-forceNetwork(Links = sj_list3$links, Nodes = sj_list3$nodes,
Source = 'source',
Target = 'target', NodeID = 'name',
Group = 'group',
zoom = TRUE, linkDistance = 200, opacity=1.6)
a
sj_list3
sj_list3$links
a<-forceNetwork(Links = sj_list3$links, Nodes = sj_list3$nodes,
Source = 'source',
Target = 'target', NodeID = 'name',
Group = 'group',
zoom = TRUE, linkDistance = 200, opacity=1.6)
a
ForceNetwork(data2)
simpleNetwork(sj_list3, file = "meta.html")
?forceNetwork
?igraph_to_networkD3
g3
Fam
?igraph
# Random bipartite graph
inc <- matrix(sample(0:1, 50, replace = TRUE, prob=c(2,1)), 10, 5)
g <- graph_from_incidence_matrix(inc)
plot(g, layout = layout_as_bipartite,
vertex.color=c("green","cyan")[V(g)$type+1])
# Two columns
g %>%
add_layout_(as_bipartite()) %>%
plot()
?graph_from_incidence_matrix
g3<- bip_init_igraph(metam)
g3
g3<- graph_from_incidence_matrix(metam, bipartite=T)
g3<- graph_from_incidence_matrix(metam, weighted=T)
g3
str(g3)
graph_attr_names(g3)
source("./functions/igraph_to_networkD3.R")
dim(metam)
head(metam)
V(g3)$mode <- c(rep("Plant",26),rep("Animal",36))
g3
is.bipartite(g3)
sj_list3 <- igraph_to_networkD3(g3, group= mode)
sj_list3 <- igraph_to_networkD3(g3, group= "mode")
plot(nch.ig, layout=layout_as_bipartite(nch.ig, hgap=2, vgap=5),
vertex.size=0,
vertex.shape= ifelse(V(nch.ig)$type, "circle", "circle"),
vertex.color= ifelse(V(nch.ig)$type, "red", "cyan"))
nch.ig %>%
add_layout_(as_bipartite(hgap=2, vgap=5)) %>%
plot(vertex.size=0,
vertex.shape= ifelse(V(nch.ig)$type, "circle", "circle"),
vertex.color= ifelse(V(nch.ig)$type, "red", "cyan"))
bdiag <- function(x){
if(!is.list(x)) stop("x not a list")
n <- length(x)
if(n==0) return(NULL)
x <- lapply(x, function(y) if(length(y)) as.matrix(y) else
stop("Zero-length component in x"))
d <- array(unlist(lapply(x, dim)), c(2, n))
rr <- d[1,]
cc <- d[2,]
rsum <- sum(rr)
csum <- sum(cc)
out <- array(0, c(rsum, csum))
ind <- array(0, c(4, n))
rcum <- cumsum(rr)
ccum <- cumsum(cc)
ind[1,-1] <- rcum[-n]
ind[2,] <- rcum
ind[3,-1] <- ccum[-n]
ind[4,] <- ccum
imat <- array(1:(rsum * csum), c(rsum, csum))
iuse <- apply(ind, 2, function(y, imat) imat[(y[1]+1):y[2],
(y[3]+1):y[4]], imat=imat)
iuse <- as.vector(unlist(iuse))
out[iuse] <- unlist(x)
return(out)
}
ml<- list(metam,t(metam))
bdiag(ml)
mm<- bdiag(ml)
dim(mm)
dim(metam[1])  +dim(metam[2])
dim(metam[1])  +dim(metam)[2]
dim(metam[1])
dim(metam)[1]
dim(metam)[1]+dim(metam)[2]
is.matrix(mm)
dim(mm)
library(networkD3); library(igraph); library(reshape2)
data1<- melt(mm) ## transform to edgelist
data<- subset(data1, value==1) ## select only interactions =1
head(data)
dim(data)
g3= graph.data.frame(data, directed=FALSE) # sets the graph framework
V(g3)$mode <- c(rep("Plant",26),rep("Animal",36))
V(g3)
g3= graph.data.frame(data1, directed=FALSE) # sets the graph framework
V(g3)$mode <- c(rep("Plant",26),rep("Animal",36))
sj_list3 <- igraph_to_networkD3(g3, group= "mode")
sj_list3 <- igraph_to_networkD3(g3, group= V(g3)$mode)
head(sj_list3)
a<-forceNetwork(Links= sj_list3$links, Nodes = sj_list3$nodes,
Source= 'source',
Target= 'target', NodeID= 'name',
Group= 'group',
zoom= TRUE, linkDistance= 200, opacity= 1.6)
a
data1<- melt(mm) ## transform to edgelist
data<- subset(data1, value==1) ## select only interactions = 1
head(data)
mm
row.names(meta)
rbind(row.names(meta),colnames(meta))
cbind(row.names(meta),colnames(meta))
append(row.names(meta),colnames(meta))
row.names(mm)<- append(row.names(meta),colnames(meta))
colnames(mm)<- append(row.names(meta),colnames(meta))
mm
data1<- melt(mm) ## transform to edgelist
head(data1)
data<- subset(data1, value==1) ## select only interactions = 1
head(data)
V(g3)
data1<- melt(metam) ## transform to edgelist
data<- subset(data1, value==1) ## select only interactions = 1
head(data)
g3= graph.data.frame(data, directed=FALSE) # sets the graph framework
V(g3)$mode <- c(rep("Plant",26),rep("Animal",36))
dim(data)
V(g3)
g3
dim(V(g3))
length(V(g3))
print(V(g3))
g3
g3= graph.data.frame(data, directed=FALSE) # sets the graph framework
g3
sj_list3 <- igraph_to_networkD3(g3, group= V(g3)$mode)
sj_list3 <- igraph_to_networkD3(g3)
sj_list3
names(sj_list3)
a<-forceNetwork(Links= sj_list3$links, Nodes = sj_list3$nodes,
Source= 'source',
Target= 'target', NodeID= 'name',
Group= 'group',
zoom= TRUE, linkDistance= 200, opacity= 1.6)
#colourScale = "d3.scale.category20f()")
a
meta<- read.table("./data-raw/w96_adj_fru.csv",
header=T, sep=",", row.names=1,
dec=".", na.strings="NA")
meta<- read.table("./data-raw/w96_adj_fru.csv",
header=T, sep=",", row.names=1,
dec=".", na.strings="NA")
meta<- read.table("./data-raw/w96_adj_fru.csv",
header=T, sep=",", row.names=1,
dec=".", na.strings="NA")
metam<-as.matrix(meta)
dim(metam)
dim(metam)[1]+dim(metam)[2]
library(networkD3); library(igraph); library(reshape2)
data1<- melt(metam) ## transform to edgelist
data<- subset(data1, value==1) ## select only interactions = 1
head(data)
dim(data)
g3= graph.data.frame(data, directed=FALSE) # sets the graph framework
V(g3)$mode <- c(rep("Plant",26),rep("Animal",36))
sj_list3 <- igraph_to_networkD3(g3)
a<-forceNetwork(Links= sj_list3$links, Nodes = sj_list3$nodes,
Source= 'source',
Target= 'target', NodeID= 'name',
Group= 'group',
zoom= TRUE, linkDistance= 200, opacity= 1.6)
#colourScale = "d3.scale.category20f()")
a
g3<- graph.data.frame(data, directed=FALSE) # sets the graph framework
g3
data
dim(data)
data
g3<- graph.data.frame(data, directed=FALSE, weighted=T) # sets the graph framework
g3<- graph.data.frame(data, directed=FALSE, what="both") # sets the graph framework
g3<- graph_from_data_frame(data, directed=FALSE, what="both") # sets the graph framework
data1
?melt
View(data1)
unique(data[,1])
unique(data[,2])
vnames<- data.frame(species=append(unique(data[,2]),unique(data[,2])),mode= c(rep("Plant",26),rep("Animal",36))
)
vnames<- data.frame(species=append(unique(data[,1]),unique(data[,2])),mode= c(rep("Plant",26),rep("Animal",36)))
table(unique(data[,1]))
table(unique(data[,2]))
append(unique(data[,1]),unique(data[,2]))
vnames<- data.frame(species=append(unique(data[,1]),unique(data[,2])),mode= c(rep("Plant",26),rep("Animal",36)))
vnames<- data.frame(species=append(unique(data[,1]),unique(data[,2])))
str(vnames)
vnames<- data.frame(species=append(row.names(data1),colnames(data1))),mode= c(rep("Plant",26),rep("Animal",36)))
vnames<- data.frame(species=append(row.names(data1),colnames(data1)),mode= c(rep("Plant",26),rep("Animal",36)))
row.names(data1)
vnames<- data.frame(species=append(row.names(metam),colnames(metam)),mode= c(rep("Plant",26),rep("Animal",36)))
vnames
g3<- graph_from_data_frame(data1, directed=FALSE) # sets the graph framework
g3
V(g3)$mode <- c(rep("Plant",26),rep("Animal",36))
sj_list3 <- igraph_to_networkD3(g3)
library(networkD3); library(igraph); library(reshape2)
sj_list3 <- igraph_to_networkD3(g3)
a<-forceNetwork(Links= sj_list3$links, Nodes = sj_list3$nodes,
Source= 'source',
Target= 'target', NodeID= 'name',
Group= 'group',
zoom= TRUE, linkDistance= 200, opacity= 1.6)
#colourScale = "d3.scale.category20f()")
a<-forceNetwork(Links= sj_list3$links, Nodes = sj_list3$nodes,
Source= 'source',
Target= 'target', NodeID= 'name',
Group= 'mode',
zoom= TRUE, linkDistance= 200, opacity= 1.6)
sj_list3
?forceNetwork
V(g3)$mode
a<-forceNetwork(Links= sj_list3$links, Nodes= sj_list3$nodes,
Source= 'source',
Target= 'target', NodeID= 'name',
Group= V(g3)$mode,
zoom= TRUE, linkDistance= 200, opacity= 1.6)
#colourScale = "d3.scale.category20f()")
a<-forceNetwork(Links= sj_list3$links, Nodes= sj_list3$nodes,
Source= 'source',
Target= 'target', NodeID= 'name',
#  Group= V(g3)$mode,
zoom= TRUE, linkDistance= 200, opacity= 1.6)
#colourScale = "d3.scale.category20f()")
a<-forceNetwork(Links= sj_list3$links, Nodes= sj_list3$nodes,
Source= 'source',
Target= 'target', NodeID= 'name',
Group= "group",
zoom= TRUE, linkDistance= 200, opacity= 1.6)
#colourScale = "d3.scale.category20f()")
a<-forceNetwork(Links= sj_list3$links, Nodes= sj_list3$nodes,
Source = 'source',
Target= 'target', NodeID= 'name',
Group= "group",
zoom= TRUE, linkDistance= 200, opacity= 1.6)
#colourScale = "d3.scale.category20f()")
sj_list3 <- igraph_to_networkD3(g3)
sj_list3
sj_list3<- data.frame(sj_list3, mode=c(rep("Plant",26),rep("Animal",36)))
str(sj_list3)
sj_list3 <- c(sj_list3,data.frame(mode=c(rep("Plant",26),rep("Animal",36))))
str(sj_list3)
a<-forceNetwork(Links= sj_list3$links, Nodes= sj_list3$nodes,
Source = 'source',
Target= 'target', NodeID= 'name',
Group= sj_list3$mode,
zoom= TRUE, linkDistance= 200, opacity= 1.6)
#colourScale = "d3.scale.category20f()")
sj_list3$links
sj_list3$nodes
a<-forceNetwork(Links= sj_list3$links, Nodes= sj_list3$nodes,
Group= sj_list3$mode,
zoom= TRUE, linkDistance= 200, opacity= 1.6)
#colourScale = "d3.scale.category20f()")
a<-forceNetwork(Links= sj_list3$links, Nodes= sj_list3$nodes,
Source = sj_list3$source,
Target= sj_list3$target, NodeID= sj_list3$name,
Group= sj_list3$mode,
zoom= TRUE, linkDistance= 200, opacity= 1.6)
#colourScale = "d3.scale.category20f()")
a<-forceNetwork(Links= sj_list3$links, Nodes= sj_list3$nodes,
Source = sj_list3$source,
Target= sj_list3$target,
Group= sj_list3$mode,
zoom= TRUE, linkDistance= 200, opacity= 1.6)
#colourScale = "d3.scale.category20f()")
str(sj_list3)
a<-forceNetwork(Links= sj_list3$links, Nodes= sj_list3$links$nodes,
Source = sj_list3$links$source,
Target= sj_list3$links$target,
Nodes= sj_list3$nodes,
Group= sj_list3$mode,
zoom= TRUE, linkDistance= 200, opacity= 1.6)
#colourScale = "d3.scale.category20f()")
a<-forceNetwork(Links= sj_list3$links,
Source = sj_list3$links$source,
Target= sj_list3$links$target,
Nodes= sj_list3$nodes,
Group= sj_list3$mode,
zoom= TRUE, linkDistance= 200, opacity= 1.6)
#colourScale = "d3.scale.category20f()")
a<-forceNetwork(Links= sj_list3$links,
Nodes= sj_list3$nodes,
Group= sj_list3$mode,
zoom= TRUE, linkDistance= 200, opacity= 1.6)
a<-forceNetwork(Links= sj_list3$links,
Source = 'source',
Target = 'target', NodeID = 'name', Group = 'group',
# Nodes= sj_list3$nodes,
# Group= sj_list3$mode,
zoom= TRUE, linkDistance= 200, opacity= 1.6)
a<-forceNetwork(Links= sj_list3$links,
Source = 'source',
Target = 'target',
Nodes = sj_list3$nodes,
NodeID = 'name', Group = 'group',
# Nodes= sj_list3$nodes,
# Group= sj_list3$mode,
zoom= TRUE, linkDistance= 200, opacity= 1.6)
sj_list3$links
sj_list3$nodes
a<-forceNetwork(Links= sj_list3$links,
Source = 'source',
Target = 'target',
Nodes = sj_list3$nodes,
NodeID = 'name', Group = 'group',
# Nodes= sj_list3$nodes,
Group= sj_list3$mode,
zoom= TRUE, linkDistance= 200, opacity= 1.6)
a<-forceNetwork(Links= sj_list3$links,
Source = 'source',
Target = 'target',
Nodes = sj_list3$nodes,
NodeID = 'name',
# Nodes= sj_list3$nodes,
Group= sj_list3$mode,
zoom= TRUE, linkDistance= 200, opacity= 1.6)
names(sj_list3)
str(sj_list3)
sj_list3$nodes <- data.frame(sj_list3$nodes, data.frame(mode=c(rep("Plant",26),rep("Animal",36))))
str(sj_list3)
g3<- graph_from_data_frame(data1, directed=FALSE) # sets the graph framework
sj_list3 <- igraph_to_networkD3(g3)
sj_list3$nodes <- data.frame(sj_list3$nodes, data.frame(mode=c(rep("Plant",26),rep("Animal",36))))
str(sj_list3)
a<-forceNetwork(Links= sj_list3$links,
Source = 'source',
Target = 'target',
Nodes = sj_list3$nodes,
NodeID = 'name',
# Nodes= sj_list3$nodes,
Group= sj_list3$mode,
zoom= TRUE, linkDistance= 200, opacity= 1.6)
a<-forceNetwork(Links= sj_list3$links,
Source = 'source',
Target = 'target',
Nodes = sj_list3$nodes,
NodeID = 'name',
# Nodes= sj_list3$nodes,
Group= sj_list3$mode,
zoom= TRUE, linkDistance= 200, opacity= 1.6)
sj_list3$nodes
a<-forceNetwork(Links= sj_list3$links,
Source = 'source',
Target = 'target',
Nodes = sj_list3$nodes$name,
NodeID = 'name',
# Nodes= sj_list3$nodes,
Group= sj_list3$nodes$mode,
zoom= TRUE, linkDistance= 200, opacity= 1.6)
nodes
str(sj_list3$nodes)
a<-forceNetwork(Links= sj_list3$links,
Source = 'source',
Target = 'target',
Nodes = sj_list3$nodes,
NodeID = 'name',
# Nodes= sj_list3$nodes,
Group= sj_list3$nodes$mode,
zoom= TRUE, linkDistance= 200, opacity= 1.6)
a
g3<- graph_from_data_frame(data1, directed=FALSE) # sets the graph framework
sj_list3 <- igraph_to_networkD3(g3)
sj_list3$nodes <- data.frame(sj_list3$nodes, data.frame(mode=c(rep("Plant",26),rep("Animal",36))))
head(sj_list3)
a<-forceNetwork(Links= sj_list3$links,
Source = 'source',
Target = 'target',
Nodes = sj_list3$nodes,
NodeID = 'name',
# Nodes= sj_list3$nodes,
Group= sj_list3$nodes$mode,
zoom= TRUE, linkDistance= 200, opacity= 1.6)
a
a<-forceNetwork(Links= sj_list3$links,
#    Source = 'source',
Target = 'target',
Nodes = sj_list3$nodes,
#    NodeID = 'name',
# Nodes= sj_list3$nodes,
Group= sj_list3$nodes$mode,
zoom= TRUE, linkDistance= 200, opacity= 1.6)
sj_list3 <- igraph_to_networkD3(g3)
sj_list3$nodes <- data.frame(sj_list3$nodes, data.frame(group=c(rep("Plant",26),rep("Animal",36))))
head(sj_list3)
a<-forceNetwork(Links= sj_list3$links,
Source = 'source',
Target = 'target',
Nodes = sj_list3$nodes,
NodeID = 'name',
# Nodes= sj_list3$nodes,
Group= sj_list3$nodes$mode,
zoom= TRUE, linkDistance= 200, opacity= 1.6)
a<-forceNetwork(Links= sj_list3$links,
Source = 'source',
Target = 'target',
Nodes = sj_list3$nodes,
NodeID = 'name',
# Nodes= sj_list3$nodes,
Group= sj_list3$nodes,
zoom= TRUE, linkDistance= 200, opacity= 1.6)
a<-forceNetwork(Links= sj_list3$links,
Source = 'source',
Target = 'target',
Nodes = sj_list3$nodes,
NodeID = 'name',
# Nodes= sj_list3$nodes,
Group= 'group',
zoom= TRUE, linkDistance= 200, opacity= 1.6)
a
?networkD3
library(networkD3)
?networkD3
metam
g3<- bip_init_igraph(metam)
g3
V(g3)$species <- as.character(nch_attr$species)
V(g3)$fam <- as.character(nch_attr$family)
V(g3)$spcode <- as.character(nch_attr$spcode)
V(g3)$mode <- c(rep("Plant",26),rep("Animal",36))
V(g3)$genus<- as.character(nch_attr$genus)
V(g3)$bodymass<- nch_attr$w
V(g3)$frdiam_gape<- nch_attr$g
V(g3)$abund<- nch_attr$a
V(g3)$frugivory<- nch_attr$f
V(g3)$phenology<- nch_attr$ph
V(g3)$phen.forb<- nch_attr$pp
g3
table(E(g3)$type)
g3
table(E(g3)$mode)
table(V(g3)$mode)
sj_list3 <- igraph_to_networkD3(g3, group = "mode")
V(g3)$mode
table(V(g3)$type)
sj_list3 <- igraph_to_networkD3(g3, group = "type")
sj_list3 <- igraph_to_networkD3(g3)
head(sj_list3)
a<-forceNetwork(Links= sj_list3$links,
Source = 'source',
Target = 'target',
Nodes = sj_list3$nodes,
NodeID = 'name',
# Nodes= sj_list3$nodes,
Group= 'group',
zoom= TRUE, linkDistance= 200, opacity= 1.6)
str(sj_list3)
g3
a<-forceNetwork(Links= sj_list3$links,
Source = 'source',
Target = 'target',
Nodes = sj_list3$nodes,
NodeID = 'name',
# Nodes= sj_list3$nodes,
Group = "type.label",
zoom= TRUE, linkDistance= 200, opacity= 1.6)
sj_list3$links
a<-forceNetwork(Links= sj_list3$links,
Source = "source",
Target = "target",
Nodes = sj_list3$nodes,
NodeID = "name",
# Nodes= sj_list3$nodes,
Group = "type.label",
zoom= TRUE, linkDistance= 200, opacity= 1.6)
sj_list3$nodes
sj_list3$links$source
a<-forceNetwork(Links= sj_list3$links,
Source = sj_list3$links$source,
Target = sj_list3$links$target,
Nodes = sj_list3$nodes,
NodeID = "name",
# Nodes= sj_list3$nodes,
Group = "type.label",
zoom= TRUE, linkDistance= 200, opacity= 1.6)
sj_list3$nodes <- data.frame(sj_list3$nodes, data.frame(group=c(rep("Plant",26),rep("Animal",36))))
sj_list3$nodes
a<-forceNetwork(Links= sj_list3$links,
Source = sj_list3$links$source,
Target = sj_list3$links$target,
Nodes = sj_list3$nodes,
NodeID = sj_list3$nodes$name,
# Nodes= sj_list3$nodes,
Group = sj_list3$nodes$group,
zoom= TRUE, linkDistance= 200, opacity= 1.6)
str(sj_list3$links)
a<-forceNetwork(Links= sj_list3$links,
Nodes = sj_list3$nodes,
Source = sj_list3$links$source,
Target = sj_list3$links$target,
NodeID = sj_list3$nodes$name,
# Nodes= sj_list3$nodes,
Group = sj_list3$nodes$group,
zoom= TRUE, linkDistance= 200, opacity= 1.6)
=======
color= "mode", palette = col,
label= TRUE, shape= "mode",
edge.label= "weights")
# Label weights directly into edges
bip= data.frame(P1= c(1, 12, 6, 0),
P2= c(1, 0, 4, 0),
P3= c(1, 7, 3, 12),
row.names= letters[1:4])
bip.net<- network(bip,
matrix.type = "bipartite",
ignore.eval = FALSE,
names.eval = "weights")
ggnet2(bip.net,
color= "mode", palette = col,
label= TRUE, shape= "mode",
edge.label= "weights")
require(ggplot2)
require(network)
require(igraph)
require(sna)
require(ggnet)
require(ggrepel)
require(ergm)
require(intergraph)
require(RColorBrewer)
require(ggplot2)
require(network)
require(igraph)
require(sna)
require(ggnet)
require(ggrepel)
require(ergm)
require(intergraph)
require(RColorBrewer)
require(ggplot2)
require(network)
require(igraph)
require(sna)
require(ggnet)
require(ggrepel)
require(ergm)
require(intergraph)
require(RColorBrewer)
require(ggplot2)
require(network)
require(igraph)
require(sna)
require(ggnet)
require(ggrepel)
require(ergm)
require(intergraph)
require(RColorBrewer)
bip_railway <- function (mymat, nodesize=9, label=F) {
# Coords for mode "A"
coordA<- cbind(rep(2,dim(mymat)[1]), seq(1, dim(mymat)[1])+2)
# Coords for mode "P"
coordP<- cbind(rep(4,dim(mymat)[2]), seq(1, dim(mymat)[2])+2)
mylayout<- as.matrix(rbind(coordA, coordP))
#
# Initialize and plot the network with a railway layout.
test.net<- bip_init_network(mymat)
p<- ggnet2(test.net, mode=mylayout, label=label,
size= nodesize, label.size=nodesize/3,
layout.exp=1.5) + coord_flip()
p
}
bip_railway()
coordA<- cbind(rep(2,dim(mymat)[1]), seq(1, dim(mymat)[1])+2)
coordP<- cbind(rep(4,dim(mymat)[2]), seq(1, dim(mymat)[2])+2)
mylayout<- as.matrix(rbind(coordA, coordP))
test.net<- bip_init_network(mymat)
p<- ggnet2(test.net, mode=mylayout, label=label,
size= nodesize, label.size=nodesize/3,
layout.exp=1.5) + coord_flip()
p
coordA<- cbind(rep(2,dim(mymat)[1]), seq(1, dim(mymat)[1])+2)
coordP<- cbind(rep(4,dim(mymat)[2]), seq(1, dim(mymat)[2])+2)
mylayout<- as.matrix(rbind(coordA, coordP))
nodesize=9
test.net<- bip_init_network(mymat)
p<- ggnet2(test.net, mode=mylayout, label=label,
size= nodesize, label.size=nodesize/3,
layout.exp=1.5) + coord_flip()
p
# Plot layout coordinates for railway networkplot
# A matrix whose rows contain the x,y coordinates of the vertices of d.
#
# Coords for mode "A"
coordA<- cbind(rep(2,dim(mymat)[1]), seq(1, dim(mymat)[1])+2)
# Coords for mode "P"
coordP<- cbind(rep(4,dim(mymat)[2]), seq(1, dim(mymat)[2])+2)
mylayout<- as.matrix(rbind(coordA, coordP))
nodesize=9; label=F;
#
# Initialize and plot the network with a railway layout.
test.net<- bip_init_network(mymat)
p<- ggnet2(test.net, mode=mylayout, label=label,
size= nodesize, label.size=nodesize/3,
layout.exp=1.5) + coord_flip()
p
# Plot layout coordinates for railway networkplot
# A matrix whose rows contain the x,y coordinates of the vertices of d.
#
# Coords for mode "A"
coordA<- cbind(rep(2,dim(mymat)[1]), seq(1, dim(mymat)[1])+2)
# Coords for mode "P"
coordP<- cbind(rep(4,dim(mymat)[2]), seq(1, dim(mymat)[2])+2)
mylayout<- as.matrix(rbind(coordA, coordP))
nodesize=9; label=T;
#
# Initialize and plot the network with a railway layout.
test.net<- bip_init_network(mymat)
p<- ggnet2(test.net, mode=mylayout, label=label,
size= nodesize, label.size=nodesize/3,
layout.exp=1.5) + coord_flip()
p
mymat <- read.delim("data.txt", row.names=1)   # Not run.
mymat <- read.table(pipe("pbpaste"), header= T, sep= "\t", row.names= 1)
mymat <- read.delim("./data-raw/data.txt", row.names=1)   # Not run.
pp1<- ggnet2(nch.net, size= 6, color= "mode", label= T, label.size=3,
palette= c("actor"= "indianred3", "event"= "steelblue4"))
pp1
source('~/Documents/Working/~RCode/MyRCode/networks/bipartite_plots/R/bip_railway.R', echo=TRUE)
bip_railway(bin)
bip_railway(bin.net)
mymat
bip_railway(mymat)
bip_railway(mymat, label=T)
# Plot layout coordinates for railway networkplot
#
mymat <- read.delim("./data-raw/data.txt", row.names=1)   # Not run.
bip_railway(mymat)
network.vertex.names(mymat)
network.vertex.names(mynet)
mymat <- read.delim("./data-raw/data.txt", row.names=1)   # Not run.
mynet<- bip_init_network(mymat)
bip_railway(mynet, label=T)
mymat <- read.delim("./data-raw/data.txt", row.names=1)   # Not run.
mynet<- bip_init_network(mymat)
bip_railway(mynet, label=T)
mymat <- read.delim("./data-raw/data.txt", row.names=1)   # Not run.
bip_railway(mymat, label=T)
network.vertex.names
# The Nava de las Correhuelas dataset.
nch <- read.table("./data-raw/w96.txt",
header=T, sep=",", row.names=1,
dec=".", na.strings="NA")
# The Nava de las Correhuelas dataset.
nch <- read.table("./data-raw/w96.csv",
header=T, sep=",", row.names=1,
dec=".", na.strings="NA")
## Node attributes, animals
nch_A<- read.table("./data-raw/w96_animal.csv",
header=T, sep=",", row.names=1,
dec=".", na.strings="NA")
nch<- read.table("./data-raw/w96.csv",
header=T, sep=",", row.names=1,
dec=".", na.strings="NA")
nch_A<- read.table("./data-raw/w96_animal.csv",
header=T, sep=",", row.names=1,
dec=".", na.strings="NA")
nch_A<- read.table("./data-raw/w96_animal.csv",
header=T, sep=",",
dec=".", na.strings="NA")
nch_P<- read.table("./data-raw/w96_plant.csv",
header=T, sep=",",
dec=".", na.strings="NA")
hr<- read.table("./data-raw/w97.csv",
header=T, sep=",", row.names=1,
dec=".", na.strings="NA")
hr_A<- read.table("./data-raw/w97_animal.csv",
header=T, sep=",",
dec=".", na.strings="NA")
hr_P<- read.table("./data-raw/w97_plant.csv",
header=T, sep=",",
dec=".", na.strings="NA")
nch.net <- bip_init_network(nch)
nch.ig<- bip_init_igraph(nch)
hr.net <- bip_init_network(hr)
if(!is.network(nch.net)) stop("Must first initialize the network; use 'bip_init_network.R'.")
nch.net<- bip_init_network(nch)
hr.net<- bip_init_network(hr)
mynet<- nch.net
require(ggnet)
require(ggrepel)
# Detect and color the mode
col= c("actor"= "grey80", "event"= "gold2")
ggnet2(mynet,
color= "mode", palette= col,
label= TRUE, label.size=3,
layout.exp= 0.25)        # Using layout.exp because of long labels
col= c("actor"= "#FC9272", "event"= "#9ECAE1")
pp<- ggnet2(hr.net, size=7,
shape= "mode", #label= T,
color= "mode", palette= col,
edge.size= bip_edgewt(nch, 5),
edge.alpha= 0.25,
layout.exp= 0.25) +
geom_text(aes(label= network.vertex.names(nch.net)),
color= "black", size= 3)
pp
source("./R/bip_edgewt")
source("./R/bip_init_network.R")
source("./R/bip_init_igraph.R")
source("./R/bip_edgewt.R")
# Set colors for each mode
col= c("actor"= "#FC9272", "event"= "#9ECAE1")
pp<- ggnet2(hr.net, size=7,
shape= "mode", #label= T,
color= "mode", palette= col,
edge.size= bip_edgewt(nch, 5),
edge.alpha= 0.25,
layout.exp= 0.25) +
geom_text(aes(label= network.vertex.names(nch.net)),
color= "black", size= 3)
# Set colors for each mode
col= c("actor"= "#FC9272", "event"= "#9ECAE1")
pp<- ggnet2(hr.net, size=7,
shape= "mode", #label= T,
color= "mode", palette= col,
edge.size= bip_edgewt(hr, 5),
edge.alpha= 0.25,
layout.exp= 0.25) +
geom_text(aes(label= network.vertex.names(nch.net)),
color= "black", size= 3)
pp
# Set colors for each mode
col= c("actor"= "#FC9272", "event"= "#9ECAE1")
pp<- ggnet2(hr.net, size=7,
shape= "mode", #label= T,
color= "mode", palette= col,
edge.size= bip_edgewt(hr, 5),
edge.alpha= 0.25,
layout.exp= 0.25) +
geom_text(aes(label= network.vertex.names(hr.net)),
color= "black", size= 3)
pp
hr
glimse(nch_A)
glimpse(nch_A)
glimpse(nch_P)
mode()
dim(nch)
nch
dim(nch[1]
)
nch[1]
nch_A
dim(nch_A)
dim(nch)
nch.net
x = data.frame(Species= network.vertex.names(nch.net))
for (i in names(nch_A)) {
y = merge(x, nch_A, by = "Species", sort = FALSE)[, i ]
set.vertex.attribute(twitter, i, as.character(y))
)
x<- data.frame(Species= network.vertex.names(nch.net))
x
for (i in names(nch_A)) {
y = merge(x, nch_A, by = "Species", sort = FALSE)[, i ]
set.vertex.attribute(twitter, i, as.character(y))
}
for (i in names(nch_A)) {
y = merge(x, nch_A, by = "Species", sort = FALSE)[, i ]
set.vertex.attribute(nch.net, i, as.character(y))
}
as.network(nch.net)
x<- data.frame(Species= network.vertex.names(nch.net))
x
for (i in names(nch_A)) {
y= merge(x, nch_A, by= "Species", sort= FALSE)[, i ]
set.vertex.attribute(nch.net, i, as.character(y))
}
set.vertex.attribute(nch.ig , i, as.character(y))
i=1
y= merge(x, nch_A, by= "Species", sort= FALSE)[, i ]
y
str(y)
i=5
y= merge(x, nch_A, by= "Species", sort= FALSE)[, i ]
y
tt<- merge(nch_A,nch_P,all=TRUE)
tt
?rbind_all
tt<- bind_rows(list(nch_A,nch_P))
str(tt)
tt
tt<- full_join(list(nch_A,nch_P))
tt<- full_join(nch_A,nch_P)
tt
names(nch_att)
nch_att<- full_join(nch_A,nch_P)
names(nch_att)
names(nch_A)
names(nch_P)
pp2<- ggnet2(nch.net, size= 0,
shape= "mode",
palette= "Set1",
color= "mode",
edge.size= bip_edgewt(nch, 7.5),
edge.alpha= 0.25,
layout.exp= 0.25) +
geom_point(aes(color= color), size= 10, color= "white") +
geom_point(aes(color= color), size= 10, alpha= 0.5) +
geom_point(aes(color= color), size= 8) +
geom_text(aes(label= network.vertex.names(nch.net)),
color= "black", size= 3.5) + # check_overlap= TRUE
guides(color= FALSE)
pp2
pp1<- ggnet2(nch.net, size= 6, color= "Fam", label= T, label.size=3)
pp1
ggnet2(nch.net, color = "Fam")
nch_att$Family
get.vertex.attribute(nch.net,Fam)
list.network.attributes(nch.net)
list.node.attributes(nch.net)
list.vertex.attributes(nch.net)
network::list.vertex.attributes(nch.net)
network::list.vertex.attributes(nch.net)[1]
nch.net %v% "Fam"<- nch_att$Family
?%v%
nch.net %v% "Fam"= nch_att$Family
network::get.vertex.attribute(nch.net,Fam)add.edge()
network::get.vertex.attribute(nch.net,Fam)
network::list.vertex.attributes(nch.net)
nch.net %v% "Gen"= nch_att$Genus
network::list.vertex.attributes(nch.net)
nch.net %v% "BM"= nch_att$Body_mass
nch.net %v% "FrLen"= nch_att$Fruit_length
ggnet2(nch.net, color = "Fam")
pp1<- ggnet2(nch.net, size= 6, color= "Fam", label= T, label.size=3)
pp1
pp1<- ggnet2(nch.net, size= 6, color= "Fam", label= T, label.size=3,
palette("Set2"))
pp1<- ggnet2(nch.net, size= 6, color= "Fam", label= T, label.size=3,
palette="Set2")
pp1<- ggnet2(nch.net, size= 6, color= "Fam", label= T, label.size=3,
palette="Set4")
pp1<- ggnet2(nch.net, size= 6, color= "BM", label= T, label.size=3)
pp1
pp1<- ggnet2(nch.net, size= 6, color= "Fam", label= T, label.size=3)
pp1
# The Nava de las Correhuelas dataset.
nch<- read.table("./data-raw/w96.csv",
header=T, sep=",", row.names=1,
dec=".", na.strings="NA")
## Node attributes, animals
nch_A<- read.table("./data-raw/w96_animal.csv",
header=T, sep=",",
dec=".", na.strings="NA")
## Node attributes, plants
nch_P<- read.table("./data-raw/w96_plant.csv",
header=T, sep=",",
dec=".", na.strings="NA")
# The Hato Raton dataset.
hr<- read.table("./data-raw/w97.csv",
header=T, sep=",", row.names=1,
dec=".", na.strings="NA")
## Node attributes, animals
hr_A<- read.table("./data-raw/w97_animal.csv",
header=T, sep=",",
dec=".", na.strings="NA")
## Node attributes, plants
hr_P<- read.table("./data-raw/w97_plant.csv",
header=T, sep=",",
dec=".", na.strings="NA")
glimpse(nch_A)
glimpse(nch_P)
glimpse(hr_A)
glimpse(hr_P)
source("./R/bip_init_network.R")
source("./R/bip_init_igraph.R")
# test.net<- bip_init_network(mymat)
# test.ig<- bip_init_igraph(mymat)
nch.net<- bip_init_network(nch)
nch.ig<- bip_init_igraph(nch)
hr.net<- bip_init_network(hr)
hr.ig<- bip_init_igraph(hr)
# Sourcing required functions and initializing the net objects.
source("./R/bip_igplot.R")
source("./R/bip_qtplot.R")
source("./R/bip_railway.R")
source("./R/vectorize.R")
source("./R/bip_edgewt.R")
# Plotting bipartite networks from adjacency matrix of two-mode network.
# Using ggnet.
# DATE: 15Jul2013. Updated to ggnet 11/11/2016.
#
require(ggnet)
require(ggrepel)
#
# test.net<- bip_init_network(mymat)
mynet<- nch.net
if(!is.network(nch.net)) stop("Must first initialize the network; use 'bip_init_network.R'.")
# Plot layout coordinates for railway networkplot. Input is the
# adjacency matrix.
#
mymat <- read.delim("./data-raw/data.txt", row.names=1)   # Not run.
bip_railway(mymat, label=T)
# Detect and color the mode
col= c("actor"= "grey80", "event"= "gold2")
ggnet2(mynet,
color= "mode", palette= col,
label= TRUE, label.size=3,
layout.exp= 0.25)        # Using layout.exp because of long labels
# Label weights directly into edges
bip= data.frame(P1= c(1, 12, 6, 0),
P2= c(1, 0, 4, 0),
P3= c(1, 7, 3, 12),
row.names= letters[1:4])
bip.net<- network(bip,
matrix.type = "bipartite",
ignore.eval = FALSE,
names.eval = "weights")
ggnet2(bip.net,
color= "mode", palette = col,
label= TRUE, shape= "mode",
edge.label= "weights")
# Set colors for each mode
col= c("actor"= "#FC9272", "event"= "#9ECAE1")
pp<- ggnet2(hr.net, size=7,
shape= "mode", #label= T,
color= "mode", palette= col,
edge.size= bip_edgewt(hr, 5),
edge.alpha= 0.25,
layout.exp= 0.25) +
geom_text(aes(label= network.vertex.names(hr.net)),
color= "black", size= 3)
pp
pp1<- ggnet2(nch.net, size= 6, color= "mode", label= T, label.size=3,
palette= c("actor"= "indianred3", "event"= "steelblue4"))
pp1
pp2<- ggnet2(nch.net, size= 0,
shape= "mode",
palette= "Set1",
color= "mode",
edge.size= bip_edgewt(nch, 7.5),
edge.alpha= 0.25,
layout.exp= 0.25) +
geom_point(aes(color= color), size= 10, color= "white") +
geom_point(aes(color= color), size= 10, alpha= 0.5) +
geom_point(aes(color= color), size= 8) +
geom_text(aes(label= network.vertex.names(nch.net)),
color= "black", size= 3.5) + # check_overlap= TRUE
guides(color= FALSE)
pp2
nums<- as.vector(c(1:sum(dim(nch))))
pp3<- ggnet2(nch.net, size= 0,
shape= "mode",
palette= "Set1",
color= "mode",
edge.size= bip_edgewt(nch, 7.5),
edge.alpha= 0.5,
layout.exp = 0.25) +
geom_point(aes(color= color), size= 10, color= "white") +
geom_point(aes(color= color), size= 10, alpha= 0.5) +
geom_point(aes(color= color), size= 8) +
geom_text(aes(label= nums),
color= "white", size= 3.5, fontface="bold") +
guides(color= FALSE)
pp3
pp4<- ggnet2(nch.net, size= 7,
shape= "mode",
palette= "Set1",
color= "mode",
edge.size= bip_edgewt(nch, 7.5),
edge.alpha= 0.25,
layout.exp = 0.25) +
guides(color= FALSE) +
# This is how the check overlap option in ggnet2 goes.
# geom_text(aes(label= network.vertex.names(nch.net)),
#         color= "black", size= 3.5) + # check_overlap= TRUE
# This uses ggrepel.
geom_text_repel(aes(label= network.vertex.names(nch.net)),
color= "black", size= 3.5)
pp4
sessionInfo()
colourpicker:::colourPickerAddin()
require(ggplot2)
require(network)
require(igraph)
require(sna)
require(ggnet)
require(ggrepel)
require(ergm)
require(intergraph)
require(RColorBrewer)
# Read data matrices.
# Read a network
# Creating the objects. Example input from the clipboard.
#
# Where data.txt has a weighted adjacency matrix, e.g.,:
Aa	Ab	Ac	Ba	Bb	Bc	Bd	Ca	Cb	Cc	Da
pp4<- ggnet2(nch.net, size= 7,
shape= "mode",
palette= "Set1",
color= "mode",
edge.size= bip_edgewt(nch, 7.5),
edge.alpha= 0.25,
layout.exp = 0.25) +
guides(color= FALSE) +
# This is how the check overlap option in ggnet2 goes.
# geom_text(aes(label= network.vertex.names(nch.net)),
#         color= "black", size= 3.5) + # check_overlap= TRUE
# This uses ggrepel.
geom_text_repel(aes(label= network.vertex.names(nch.net)),
color= "black", size= 3.5)
pp4
library(ggbipart)
?ggbipart
library(ggbipart)
?ggbipart
>>>>>>> ggbipart
